{% extends "base.html" %}

{% block content %}
<h1>This is the staff page</h1>

{% if flagged_students %}
    <div class="container">
        <p>The following students have been flagged. Please review their latest form responses:
        {% for stu in flagged_students %}
            {{ stu["uid"] }}
        {% endfor %}
        </p>
    </div>
{% endif %}

<h1>List of all students currently registered in the system: </h1>
<table class="table table-striped">
    <thead>
        <tr>
            <th scope="col">#</th>
            <th scope="col">Student name</th>
            <th scope="col">University Email</th>
            <th scope="col">Student ID</th>
            <th scope="col">Forms Completed</th>
        </tr>
    </thead>
    <tbody>
        {% for student_attr in students_attrs %}
        <tr>
            <td>{{ student_attr["uid"] }}</td>
            <td class="text-start text-nowrap">
                <a href="{{ url_for('view_student', id=student_attr['uid']) }}">{{ student_attr["name"] }}</a>
            </td>
                <td>{{ student_attr["university_email"] }}</td>
                <td>{{ student_attr["student_id"] }}</td>
                <td>{{ student_attr["forms_completed"] }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
